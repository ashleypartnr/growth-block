(()=>{"use strict";const e=window.wp.interactivity,t=e=>e?.closest?.('[data-wp-interactive="greengrowth-showcase"]')||null,r=e=>e?{showExploreButton:"true"===e.dataset.showExploreButton,exploreButtonText:e.dataset.exploreButtonText||"Explore More"}:{showExploreButton:!1,exploreButtonText:"Explore More"},o=e=>{if(!e)return;const t=e.querySelector(".gg-projects-grid");if(!t)return;const r=Array.from(t.querySelectorAll(".gg-project-card")).filter(e=>"none"!==e.style.display);if(0===r.length)return;r.forEach(e=>{const t=e.querySelector(".gg-project-title"),r=e.querySelector(".gg-project-excerpt");t&&(t.style.minHeight=""),r&&(r.style.minHeight="")});const o=[];let n=[],s=null;r.forEach(e=>{const t=e.offsetTop;null===s||Math.abs(t-s)<10?(n.push(e),s=t):(n.length>0&&o.push(n),n=[e],s=t)}),n.length>0&&o.push(n),o.forEach(e=>{if(1===e.length)return;let t=0,r=0;e.forEach(e=>{const o=e.querySelector(".gg-project-title"),n=e.querySelector(".gg-project-excerpt");o&&(t=Math.max(t,o.offsetHeight)),n&&(r=Math.max(r,n.offsetHeight))}),e.forEach(e=>{const o=e.querySelector(".gg-project-title"),n=e.querySelector(".gg-project-excerpt");o&&t>0&&(o.style.minHeight=`${t}px`),n&&r>0&&(n.style.minHeight=`${r}px`)})})},n=(e,t,r)=>{const o=document.createElement("article");o.className="gg-project-card",o.setAttribute("data-wp-key",e.id),o.setAttribute("data-service-areas",e.serviceAreas.join(","));const n=document.createElement("a");n.href=e.link,n.className="gg-project-card-link";const s=document.createElement("div");if(s.className="gg-project-image",e.image&&e.image.url){const t=document.createElement("img");t.src=e.image.url,t.alt=e.image.alt||"",t.loading="lazy",t.width=800,t.height=600,s.appendChild(t)}const i=document.createElement("div");i.className="gg-project-content";const c=document.createElement("h3");c.className="gg-project-title",c.textContent=e.title;const l=document.createElement("p");if(l.className="gg-project-excerpt",l.textContent=e.excerpt,i.appendChild(c),i.appendChild(l),t){const e=document.createElement("span");e.className="gg-explore-button",e.textContent=r;const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("class","gg-explore-icon"),t.setAttribute("width","20"),t.setAttribute("height","20"),t.setAttribute("viewBox","0 0 20 20"),t.setAttribute("fill","none"),t.setAttribute("aria-hidden","true");const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M4 10H16M16 10L11 5M16 10L11 15"),o.setAttribute("stroke","currentColor"),o.setAttribute("stroke-width","2"),o.setAttribute("stroke-linecap","round"),o.setAttribute("stroke-linejoin","round"),t.appendChild(o),e.appendChild(t),i.appendChild(e)}return n.appendChild(s),n.appendChild(i),o.appendChild(n),o};(0,e.store)("greengrowth-showcase",{state:{get hasProjects(){const t=(0,e.getContext)();return t.filteredProjects&&t.filteredProjects.length>0},get announcement(){const t=(0,e.getContext)(),r=t.filteredProjects?t.filteredProjects.length:0;return`Showing ${r} project${1===r?"":"s"} in ${t.selectedAreaLabel}`},get isActive(){const t=(0,e.getContext)();return t.buttonArea===t.selectedArea}},actions:{filterByArea(s){const i=(0,e.getContext)(),{ref:c}=(0,e.getElement)(),l=s?.target?.closest(".gg-filter-button")||c;if(!l)return;const a=l.getAttribute("data-area")||"all",d=l.textContent.trim();i.selectedArea=a,i.selectedAreaLabel=d,i.filteredProjects="all"===a?i.allProjects:i.allProjects.filter(e=>e.serviceAreas&&e.serviceAreas.includes(a)),i.displayedProjects=i.filteredProjects.slice(0,i.postsPerPage),i.currentOffset=i.postsPerPage,i.hasMore=i.currentOffset<i.filteredProjects.length;const g=t(l);if(!g)return;const u=g.querySelector(".gg-projects-grid");if(u){u.querySelectorAll(".gg-project-card").forEach(e=>e.remove());const{showExploreButton:e,exploreButtonText:t}=r(g);i.displayedProjects.forEach(r=>{const o=n(r,e,t);u.appendChild(o)});const s=g.querySelector(".gg-empty-state");s&&(s.style.display=0===i.displayedProjects.length?"":"none"),setTimeout(()=>{o(g)},50),(e=>{if(!(e&&window.innerWidth<=768))return;const t=e.querySelector(".gg-projects-grid");if(!t)return;const r=e.querySelector(".gg-filter-buttons"),o=r?.classList.contains("is-sticky"),n=r?r.offsetHeight:0,s=t.querySelector(".gg-project-card");if(!o||!s)return;const i=s.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:Math.max(0,i-n-8),behavior:"smooth"})})(g)}}},callbacks:{initInfiniteScroll(){const s=(0,e.getContext)(),{ref:i}=(0,e.getElement)(),c=t(i);if(!c||!i)return;const l=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&s.hasMore&&!s.isLoading&&((e,t)=>{if(e.isLoading||!e.hasMore)return;e.isLoading=!0;const s=e.filteredProjects.slice(e.currentOffset,e.currentOffset+e.postsPerPage);e.displayedProjects=[...e.displayedProjects,...s],e.currentOffset+=s.length,e.hasMore=e.currentOffset<e.filteredProjects.length;const i=t.querySelector(".gg-projects-grid");if(i){const{showExploreButton:o,exploreButtonText:c}=r(t);s.forEach(t=>{const r=n(t,o,c);"all"===e.selectedArea||t.serviceAreas.includes(e.selectedArea)||(r.style.display="none"),i.appendChild(r)})}setTimeout(()=>{e.isLoading=!1,o(t)},300)})(s,c)})},{root:null,rootMargin:"200px",threshold:0});return l.observe(i),()=>{l.disconnect()}},initCardHeightNormalization(){const{ref:r}=(0,e.getElement)(),n=t(r);if(!n)return;let s,i;setTimeout(()=>{o(n)},100);const c=()=>{i&&cancelAnimationFrame(i),clearTimeout(s),i=requestAnimationFrame(()=>{o(n),i=null}),s=setTimeout(()=>{o(n)},50)};return window.addEventListener("resize",c),()=>{window.removeEventListener("resize",c),i&&cancelAnimationFrame(i),clearTimeout(s)}},initStickyFilterBar(){const{ref:r}=(0,e.getElement)(),o=t(r);if(!o)return;const n=o.querySelector(".gg-filter-buttons");if(!n)return;const s=()=>window.innerWidth<=768;if(!s())return;const i=()=>{const e=document.createElement("div");e.className="gg-filter-placeholder",e.style.display="none";let t=!1,r=n.getBoundingClientRect().top+window.scrollY;const o=()=>{if(!s())return;const o=window.scrollY>r;o&&!t?(n.classList.add("is-sticky"),e.style.display="block",e.style.height=`${n.offsetHeight}px`,n.parentNode.insertBefore(e,n),t=!0):!o&&t&&(n.classList.remove("is-sticky"),e.style.display="none",e.parentNode&&e.parentNode.removeChild(e),t=!1)},i=()=>{if(!s())return;const e=n.scrollLeft,t=n.scrollWidth-n.clientWidth;e<=5?n.classList.add("at-start"):n.classList.remove("at-start"),e>=t-5?n.classList.add("at-end"):n.classList.remove("at-end")},c=()=>{!s()&&t?(n.classList.remove("is-sticky","at-start","at-end"),e.parentNode&&e.parentNode.removeChild(e),t=!1):s()&&(t||(r=n.getBoundingClientRect().top+window.scrollY))};return i(),window.addEventListener("scroll",o,{passive:!0}),n.addEventListener("scroll",i,{passive:!0}),window.addEventListener("resize",c),()=>{window.removeEventListener("scroll",o),n.removeEventListener("scroll",i),window.removeEventListener("resize",c),e.parentNode&&e.parentNode.removeChild(e)}};"complete"===document.readyState?i():window.addEventListener("load",i,{once:!0})}}})})();